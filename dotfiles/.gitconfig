[user]
  name = Dustan Kasten
  email = dustan.kasten@gmail.com

[core]
  editor = nvim
  excludesfile = ~/.gitignore

#------------------------------------------------------------------------
# Display & UI
#------------------------------------------------------------------------
[pager]
  pager = delta

[interactive]
  diffFilter = delta --color-only

[delta]
  navigate = true  # use n and N to move between diff sections
  dark = true
  light = false

[column]
  ui = auto        # enable column output for commands like 'git branch'
  status = plain   # disable column output for 'git status' (show untracked files as list)

[help]
  autocorrect = 10 # auto-correct typos in commands after 1 second

#------------------------------------------------------------------------
# Branch & tag management
#------------------------------------------------------------------------
[init]
  defaultBranch = main

[branch]
  sort = -committerdate

[tag]
  sort = version:refname  # sort tags by version number

#------------------------------------------------------------------------
# Remote operations
#------------------------------------------------------------------------
[fetch]
  writeCommitGraph = true  # write commit-graph file for faster operations
  prune = true             # remove remote-tracking branches that no longer exist
  pruneTags = true         # remove remote-tracking tags that no longer exist
  all = true               # fetch all remotes

[pull]
  rebase = true  # use rebase instead of merge when pulling

[push]
  default = simple        # only push current branch if it has upstream
  autoSetupRemote = true  # automatically set up remote tracking
  followTags = true       # push tags that point to commits being pushed

#------------------------------------------------------------------------
# Merge & conflict resolution
#------------------------------------------------------------------------
[merge]
  conflictstyle = zdiff3  # show common ancestor in 3-way merge conflicts

#------------------------------------------------------------------------
# Reuse recorded resolution
# Automatically reuses conflict resolutions from previous merges
#------------------------------------------------------------------------
[rerere]
  enabled = true    # enable rerere
  autoupdate = true # automatically stage resolved files

#------------------------------------------------------------------------
# Diff, commit, rebase, aliases...normal stuff
#------------------------------------------------------------------------
[diff]
  algorithm = histogram   # use histogram diff algorithm (better for large files)
  colorMoved = plain      # highlight moved lines in diffs
  mnemonicPrefix = true   # use shorter prefixes (C/M/D instead of Copy/Move/Delete)
  renames = true          # detect renames

[commit]
  verbose = true  # show diff in commit message editor

[rebase]
  autoSquash = true   # automatically squash fixup commits
  autoStash = true    # automatically stash before rebase
  updateRefs = true   # update branches that point to commits being rebased

[alias]
  checkout-branch = !git branch --sort='-*committerdate' | fzf | xargs git checkout
  cleanup-branch = !git branch --sort='-*committerdate' | fzf -m | xargs git branch -d
  sync-branch = !git fetch origin main | git rebase origin/main
  pf = push --force-with-lease
  bb = !better-git-branch.sh
  about = "!describe() { msg=\"$1\"; git config branch.\"$(git rev-parse --abbrev-ref HEAD)\".description ${msg:+\"$msg\"}; }; describe"

# Local overrides not tracked in dotfiles, if exists
[include]
  path = ~/.gitconfig.local
